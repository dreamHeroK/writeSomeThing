## 从 Event Loop 谈 JS 的运行机制

注意，这里不谈<font color="#1990FE">可执行上下文，VO，scop chain</font>等概念（这些完全可以整理成另一篇文章了），这里主要是结合 `Event Loop` 来谈 JS 代码是如何执行的。

读这部分的前提是已经知道了 JS 引擎是单线程，而且这里会用到[上文](./bowserProcess.html)中的几个概念：（如果不是很理解，可以回头温习）

- JS 引擎线程
- 事件触发线程
- 定时触发器线程

然后再理解一个概念：

- JS 分为同步任务和异步任务
- 同步任务都在主线程上执行，形成一个执行栈
- 主线程之外，事件触发线程管理着一个任务队列，只要异步任务有了运行结果，就在任务队列之中放置一个事件。
- 一旦执行栈中的所有同步任务执行完毕（此时 JS 引擎空闲），系统就会读取任务队列，将可运行的异步任务添加到可执行栈中，开始执行。
  看图：
  ！[图 1](\images\eventLoops\1..webp)
  看到这里，应该就可以理解了：为什么有时候 setTimeout 推入的事件不能准时执行？因为可能在它推入到事件列表时，主线程还不空闲，正在执行其它代码，
  所以自然有误差。
